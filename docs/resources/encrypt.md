---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "sops_encrypt Resource - terraform-provider-sops"
subcategory: ""
description: |-
  Encrypt an unencrypted content or file using SOPS.
---

# sops_encrypt (Resource)

Encrypt an unencrypted content or file using SOPS.



<!-- schema generated by tfplugindocs -->
## Schema

### Optional

- `config_file` (String) The path to the SOPS configuration file. Overrides the `config_file` in the provider configuration. If `key_groups` is not set and a valid `config_file` is found, SOPS provider will load the creation rules from the configuration file so as to determine the `key_groups` and `shamir_threshold` options. The file path of `pseudo_filename` or `filename` (if `pseudo_filename` is not set) relative to the file path of `config_file` will be used to match against the creation rules. See [SOPS README](https://github.com/getsops/sops/blob/main/README.rst) for more information.
- `encrypted_format` (String) The format of the encrypted content. Valid values are `json`, `yaml`, `ini`, `dotenv` and `binary`. See `unencrypted_format` for more information.
- `encrypted_regex` (String) Only values matching this regex will be encrypted. At most one of `unencrypted_suffix`, `encrypted_suffix`, `unencrypted_regex` and `encrypted_regex` can be set.
- `encrypted_suffix` (String) Only values ending with this suffix will be encrypted. At most one of `unencrypted_suffix`, `encrypted_suffix`, `unencrypted_regex` and `encrypted_regex` can be set.
- `file_permission` (String) Permissions to set for the output file (before umask), expressed as string in [numeric notation](https://en.wikipedia.org/wiki/File-system_permissions#Numeric_notation). Default value is "0700"
- `filename` (String) Path to the file that will be written with the encrypted content. An error will be returned if parent directories do not exist. If the file already exists, it will be loaded and re-encrypted with the metadata preserved. Otherwise, a new file will be created with the specified permissions.
- `format` (String) The format of both the unencrypted and encrypted content. Valid values are `json`, `yaml`, `ini`, `dotenv` and `binary`. You should specify either `format`, or both `unencrypted_format` and `encrypted_format`. When none of these are set, the format will be inferred from `source` and `filename`. Defaults to `binary`.
- `key_groups` (Attributes Set) The key groups for encryption. At least one key group must be specified. SOPS uses Shamir's Secret Sharing algorithm to split the data key, such that each key group has its fragment of the data key. Every key in a key group can be used to decrypt the fragment of the data key. `shamir_threshold` specifies the number of key groups required to decrypt the data key. (see [below for nested schema](#nestedatt--key_groups))
- `pseudo_filename` (String) The filename to use for the unencrypted content when it is not a file. See `config_file` for more information.
- `shamir_threshold` (Number) The threshold for the Shamir secret sharing algorithm. Defaults to the number of key groups.
- `source` (String) Path to the file containing the unencrypted content that will be encrypted. Exactly one of `source`, `unencrypted_content` and `unencrypted_content_base64` must be set.
- `unencrypted_content` (String, Sensitive) The unencrypted content. Exactly one of `source`, `unencrypted_content` and `unencrypted_content_base64` must be set.
- `unencrypted_content_base64` (String, Sensitive) The unencrypted content in base64. Exactly one of `source`, `unencrypted_content` and `unencrypted_content_base64` must be set.
- `unencrypted_format` (String) The format of the unencrypted content. Valid values are `json`, `yaml`, `ini`, `dotenv` and `binary`. Conflicts with `format`. `unencrypted_format` and `encrypted_format` must be set together. This allows you to specify different formats for the unencrypted and encrypted content. If you want to use the same format for both the unencrypted and encrypted content, you can use `format` instead.
- `unencrypted_regex` (String) All values matching this regex will be left unencrypted. At most one of `unencrypted_suffix`, `encrypted_suffix`, `unencrypted_regex` and `encrypted_regex` can be set.
- `unencrypted_suffix` (String) All values ending with this suffix will be left unencrypted. At most one of `unencrypted_suffix`, `encrypted_suffix`, `unencrypted_regex` and `encrypted_regex` can be set. Defaults to `_unencrypted` so as to be compatible with SOPS.

### Read-Only

- `encrypted_content` (String) The encrypted content, expected to be UTF-8 encoded. Invalid UTF-8 sequences will be replaced with the Unicode replacement character.
- `encrypted_content_base64` (String) The base64 encoded encrypted content. Use this when dealing with binary data.
- `id` (String) The id of the resource. This will always be set to `-`

<a id="nestedatt--key_groups"></a>
### Nested Schema for `key_groups`

Required:

- `keys` (Attributes Set) The keys in the key group. At least one key must be specified. Every key in a key group can be used to decrypt the fragment of the data key. If there is only one key group, then every key in the key group can be used to decrypt the encrypted content. (see [below for nested schema](#nestedatt--key_groups--keys))

<a id="nestedatt--key_groups--keys"></a>
### Nested Schema for `key_groups.keys`

Optional:

- `age` (Attributes) Encrypting using [age](https://age-encryption.org/). (see [below for nested schema](#nestedatt--key_groups--keys--age))
- `azure_kv` (Attributes) Encrypting using [Azure Key Vault](https://azure.microsoft.com/en-us/services/key-vault/). (see [below for nested schema](#nestedatt--key_groups--keys--azure_kv))
- `gcp_kms` (Attributes) Encrypting using [Google Cloud KMS](https://cloud.google.com/kms). (see [below for nested schema](#nestedatt--key_groups--keys--gcp_kms))
- `hc_vault` (Attributes) Encrypting using [HashiCorp Vault](https://www.vaultproject.io/). (see [below for nested schema](#nestedatt--key_groups--keys--hc_vault))
- `kms` (Attributes) Encrypting using [AWS KMS](https://docs.aws.amazon.com/kms/latest/developerguide/overview.html). (see [below for nested schema](#nestedatt--key_groups--keys--kms))
- `pgp` (Attributes) Encrypting using PGP. (see [below for nested schema](#nestedatt--key_groups--keys--pgp))

<a id="nestedatt--key_groups--keys--age"></a>
### Nested Schema for `key_groups.keys.age`

Required:

- `recipient` (String) The Bench32-encoded age public key used to Encrypt.


<a id="nestedatt--key_groups--keys--azure_kv"></a>
### Nested Schema for `key_groups.keys.azure_kv`

Required:

- `key_name` (String) The name of the Azure Key Vault key.
- `vault_uri` (String) The URI of the Azure Key Vault. Example: `https://myvault.vault.azure.net/`.

Optional:

- `creation_date` (String) The creation date of the Key Vault key. Used for key rotation.
- `key_version` (String) The version of the Azure Key Vault key. Can be empty.


<a id="nestedatt--key_groups--keys--gcp_kms"></a>
### Nested Schema for `key_groups.keys.gcp_kms`

Required:

- `resource_id` (String) The resource ID used to refer to the GCP KMS key. It can be retrieved using the `gcloud` command.

Optional:

- `creation_date` (String) The creation date of the KMS key. Used for key rotation.


<a id="nestedatt--key_groups--keys--hc_vault"></a>
### Nested Schema for `key_groups.keys.hc_vault`

Required:

- `engine_path` (String) The path to the Vault Transit Secret engine relative to the address of the Vault server.
- `key_name` (String) The name of the Vault key.
- `vault_address` (String) The address of the Vault server.

Optional:

- `creation_date` (String) The creation date of the Vault key. Used for key rotation.


<a id="nestedatt--key_groups--keys--kms"></a>
### Nested Schema for `key_groups.keys.kms`

Required:

- `arn` (String) The ARN associated with the AWS KMS key.

Optional:

- `aws_profile` (String) The profile to use for loading configuration and credentials. See https://aws.github.io/aws-sdk-go-v2/docs/configuring-sdk/#specifying-profiles.
- `creation_date` (String) The creation date of the KMS key. Used for key rotation.
- `encryption_context` (Map of String) Additional context about the data key. See https://docs.aws.amazon.com/kms/latest/developerguide/concepts.html#encrypt_context.
- `role` (String) The role ARN to assume a role through AWS STS.


<a id="nestedatt--key_groups--keys--pgp"></a>
### Nested Schema for `key_groups.keys.pgp`

Required:

- `fingerprint` (String) The fingerprint of the PGP key.

Optional:

- `creation_date` (String) The creation date of the PGP key. Used for key rotation.
